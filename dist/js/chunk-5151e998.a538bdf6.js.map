{"version":3,"sources":["webpack:///./src/services/UserApi.js","webpack:///./src/services/UserService.js","webpack:///./src/views/AccountCreation.vue?7f07","webpack:///./src/views/AccountCreation.vue?aa49","webpack:///src/views/AccountCreation.vue","webpack:///./src/views/AccountCreation.vue?2792","webpack:///./src/views/AccountCreation.vue?c6e4"],"names":["config","baseURL","port","undefined","serverPort","url","UserApi","axios_default","a","create","__webpack_exports__","[object Object]","get","params","post","id","delete","email","put","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AccountCreation_vue_vue_type_style_index_0_id_54c271a4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AccountCreation_vue_vue_type_style_index_0_id_54c271a4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","num","attrs","on","click","$event","takePicture","_m","staticRenderFns","alt","AccountCreationvue_type_script_lang_js_","name","width","Number","height","streaming","Boolean","video","stream","canvas","photo","imgArray","document","getElementById","navigator","mediaDevices","getUserMedia","audio","then","srcObject","play","catch","err","console","log","addEventListener","ev","videoHeight","videoWidth","setAttribute","clearPhoto","methods","ctx","getContext","fillStyle","fillRect","data","toDataURL","drawImage","push","createAccount","clearphoto","response","SpotifyService","getProfile","localStorage","access_token","success","user","refresh_token","images","r2","UserService","createUser","pause","track","getTracks","stop","$router","replace","views_AccountCreationvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file"],"mappings":"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","file":"js/chunk-5151e998.a538bdf6.js","sourcesContent":["import axios from 'axios';\nvar config;\nif (process.env.NODE_ENV !== 'production') {\n\tconfig = require('../../config/settings');\n}\nvar baseURL;\nvar port;\nif (config === undefined) {\n\tbaseURL = \"https://spotilize.herokuapp.com\";\n\tport = \"\";\n} else {\n\tbaseURL = config.baseURL;\n\tport = config.serverPort;\n}\nvar url = baseURL + port + \"/users\";\nexport default () => {\n\treturn axios.create({\n\t\tbaseURL: url,\n\t});\n};","import Api from '@/services/UserApi.js'\n\nexport default {\n\tfetchUsers() {\n\t\treturn Api().get('/');\n\t},\n\tcreateUser(params) {\n\t\treturn Api().post('/add', params);\n\t},\n\tdeleteUser(id) {\n\t\treturn Api().delete(`/delete/${id}`)\n\t},\n\tgetUser(email) {\n\t\treturn Api().get(`/${email}`);\n\t},\n\tloginUser(params) {\n\t\treturn Api().post('/login', params);\n\t},\n\tupdateToken(email, params) {\n\t\treturn Api().put(`/updateToken/${email}`, params);\n\t},\n\tgetUserImage(email) {\n\t\treturn Api().get(`/image/${email}`);\n\t}\n}","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountCreation.vue?vue&type=style&index=0&id=54c271a4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountCreation.vue?vue&type=style&index=0&id=54c271a4&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"contentarea\"},[_c('h3',[_vm._v(\"We need you to take some photos of yourself for facial recognition\")]),_c('p',[_vm._v(\"Once you have taken 5 photos, you're done!\")]),_c('p'),_c('p',[_vm._v(\"Photos: \"+_vm._s(_vm.num))]),_c('div',{staticClass:\"camera\"},[_c('video',{attrs:{\"id\":\"video\"}},[_vm._v(\"Video stream not available.\")]),_c('button',{attrs:{\"id\":\"startbutton\"},on:{\"click\":function($event){_vm.takePicture()}}},[_vm._v(\"Take photo\")])]),_c('canvas',{attrs:{\"id\":\"oCan\"}}),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"output\"},[_c('img',{attrs:{\"id\":\"photo\",\"alt\":\"The screen capture will appear in this box.\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n\t<div class='contentarea'>\n\t\t<h3>We need you to take some photos of yourself for facial recognition</h3>\n\t\t<p>Once you have taken 5 photos, you're done!<p>\n\t\t<p>Photos: {{num}}</p>\n\t\t<div class=\"camera\">\n    \t\t<video id=\"video\">Video stream not available.</video>\n    \t\t<button id=\"startbutton\" @click='takePicture()'>Take photo</button>\n  \t\t</div>\n\t\t<canvas id=\"oCan\">\n  \t\t</canvas>\n  \t\t<div class=\"output\">\n    \t\t<img id=\"photo\" alt=\"The screen capture will appear in this box.\">\n  \t\t</div>\n\t</div>\n</template>\n\n<script>\nimport UserService from '@/services/UserService';\nimport SpotifyService from '@/services/SpotifyService';\n\nexport default {\n\tname: 'AccountCreation',\n\tdata() {\n\t\treturn {\n\t\t\twidth: Number,\n\t\t\theight: Number,\n\t\t\tstreaming: Boolean,\n\t\t\tvideo: null,\n\t\t\tstream: null,\n\t\t\tcanvas: null,\n\t\t\tphoto: null,\n\t\t\tnum: 0,\n\t\t\timgArray: [],\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.width = 600;\n\t\tthis.height = 0;\n\t\tthis.streaming = false;\n\t},\n\tmounted() {\n\t\tthis.video = document.getElementById('video');\n\t\tthis.canvas = document.getElementById('oCan');\n\t\tthis.photo = document.getElementById('photo');\n\t\tnavigator.mediaDevices.getUserMedia({video: true, audio: false}).then((stream) => {\n\t\t\tthis.stream = stream;\n\t\t\tthis.video.srcObject = stream;\n\t\t\tthis.video.play();\n\t\t}).catch((err) => {\n\t\t\tconsole.log(\"An error occured: \"+err);\n\t\t});\n\t\tthis.video.addEventListener('canplay', (ev) => {\n\t\t\tif(!this.streaming) {\n\t\t\t\tthis.height = this.video.videoHeight / (this.video.videoWidth / this.width);\n\t\t\t\tthis.video.setAttribute('width', this.width);\n\t\t\t\tthis.video.setAttribute('height', this.height);\n\t\t\t\tthis.canvas.setAttribute('width', this.width);\n\t\t\t\tthis.canvas.setAttribute('height', this.height);\n\t\t\t\tthis.streaming = true;\n\t\t\t}\n\t\t}, false);\n\t\tthis.clearPhoto();\n\t},\n\tmethods: {\n\t\tclearPhoto() {\n\t\t\tvar ctx = this.canvas.getContext('2d');\n\t\t\tctx.fillStyle = \"#AAA\";\n\t\t\tctx.fillRect(0,0, this.canvas.width, this.canvas.height);\n\t\t\tvar data = this.canvas.toDataURL('image/png');\n\t\t\tthis.photo.setAttribute('src', data);\n\t\t},\n\t\ttakePicture() {\n\t\t\tvar ctx = this.canvas.getContext('2d');\n\n\t\t\tif (this.width && this.height) {\n     \t \t\tthis.canvas.width = this.width;\n      \t\tthis.canvas.height = this.height;\n     \t\t \tctx.drawImage(this.video, 0, 0, this.width, this.height);\n\t\t\t\tvar data = this.canvas.toDataURL('image/png');\n\t\t\t\t//var base64 = data.replace(\"data:image/png;base64,\",\"\");\n\t\t\t\tthis.imgArray.push(data);\n\t\t\t\tthis.photo.setAttribute('src', data);\n\t\t\t\tthis.num++;\n\t\t\t\tif(this.num === 5) {\n\t\t\t\t\tthis.createAccount();\n\t\t\t\t}\n    \t\t} else {\n     \t\t \tclearphoto();\n    \t\t}\t\n\t\t},\n\t\tasync createAccount() {\n\t\t\tconst response = await SpotifyService.getProfile(localStorage.access_token);\n\t\t\tif(response.data.success === true) {\n\t\t\t\tvar email = response.data.email;\n\t\t\t\tvar name = response.data.name;\n\t\t\t\tvar user = {\n\t\t\t\t\taccess_token: localStorage.access_token,\n\t\t\t\t\trefresh_token: localStorage.refresh_token,\n\t\t\t\t\temail: email,\n\t\t\t\t\tname: name,\n\t\t\t\t\timages: this.imgArray\n\t\t\t\t};\n\t\t\t\tconst r2 = await UserService.createUser(user);\n\t\t\t\tif(r2.data.success === true) {\n\t\t\t\t\tthis.video.pause();\n\t\t\t\t\tvar track = this.stream.getTracks()[0];  // if only one media track\n\t\t\t\t\ttrack.stop();\n\t\t\t\t\tthis.$router.replace({name: 'visualizer'});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}\n}\n</script>\n\n<style scoped>\n#video {\n  border: 1px solid black;\n  box-shadow: 2px 2px 3px black;\n  width:600px;\n  height:450px;\n}\n\n#photo {\n  border: 1px solid black;\n  box-shadow: 2px 2px 3px black;\n  width:600px;\n  height:450px;\n}\n.chr {\n  background-color:#0266C8;\n  margin-top:1em;\n  color:white;\n}\n#oCan {\n  display:none;\n}\n\n.camera {\n  width: 600px;\n  margin-top: 1em;\n  display:inline-block;\n}\n\n.output {\n  width: 600px;\n  display:inline-block;\n  display: none;\n}\n\n#startbutton {\n  display:block;\n  position:relative;\n  margin-left:auto;\n  margin-right:auto;\n  bottom:32px;\n  background-color: rgba(0, 150, 0, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.7);\n  box-shadow: 0px 0px 1px 2px rgba(0, 0, 0, 0.2);\n  font-size: 14px;\n  font-family: \"Lucida Grande\", \"Arial\", sans-serif;\n  color: rgba(255, 255, 255, 1.0);\n}\n.contentarea {\n  \theight: 100%;\n\tcolor: white;\n\tbackground: #13242f;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountCreation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountCreation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AccountCreation.vue?vue&type=template&id=54c271a4&scoped=true&\"\nimport script from \"./AccountCreation.vue?vue&type=script&lang=js&\"\nexport * from \"./AccountCreation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AccountCreation.vue?vue&type=style&index=0&id=54c271a4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54c271a4\",\n  null\n  \n)\n\ncomponent.options.__file = \"AccountCreation.vue\"\nexport default component.exports"],"sourceRoot":""}