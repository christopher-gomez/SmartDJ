{"version":3,"sources":["webpack:///./src/views/AuthPage.vue?f789","webpack:///./src/services/UserApi.js","webpack:///./src/services/UserService.js","webpack:///./src/views/AuthPage.vue?a561","webpack:///src/views/AuthPage.vue","webpack:///./src/views/AuthPage.vue?9e6d","webpack:///./src/views/AuthPage.vue?8029"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AuthPage_vue_vue_type_style_index_0_id_9920a7de_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AuthPage_vue_vue_type_style_index_0_id_9920a7de_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","config","baseURL","port","undefined","serverPort","url","UserApi","axios_default","a","create","__webpack_exports__","[object Object]","get","params","post","id","delete","email","put","render","_vm","this","_h","$createElement","_c","_self","attrs","success","staticClass","user","_v","on","click","$event","cont","_e","icon","size","staticRenderFns","AuthPagevue_type_script_lang_js_","name","Boolean","code","$route","query","exchange","error","methods","response","SpotifyService","data","localStorage","setItem","access_token","refresh_token","eRes","getProfile","pRes","UserService","getUser","$router","replace","views_AuthPagevue_type_script_lang_js_","component","Object","componentNormalizer","options","__file"],"mappings":"2IAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAoeE,EAAG,2CCCveE,EAIAC,EACAC,4BACAC,IAAAH,GACAC,EAAA,kCACAC,EAAA,KAEAD,EAAAD,EAAAC,QACAC,EAAAF,EAAAI,YAEA,IAAAC,EAAAJ,EAAAC,EAAA,SACeI,EAAA,KACf,OAAQC,EAAAC,EAAKC,QACbR,QAAAI,KCfeK,EAAA,MACfC,aACA,OAASL,IAAGM,IAAA,MAEZD,WAAAE,GACA,OAASP,IAAGQ,KAAA,OAAAD,IAEZF,WAAAI,GACA,OAAST,IAAGU,kBAAqBD,MAEjCJ,QAAAM,GACA,OAASX,IAAGM,QAAWK,MAEvBN,UAAAE,GACA,OAASP,IAAGQ,KAAA,SAAAD,IAEZF,YAAAM,EAAAJ,GACA,OAASP,IAAGY,oBAAuBD,IAAMJ,IAEzCF,aAAAM,GACA,OAASX,IAAGM,cAAiBK,iDCtB7B,IAAAE,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,OAAOX,GAAA,WAAa,IAAAK,EAAAO,QAAAH,EAAA,OAAiCI,YAAA,aAAsB,IAAAR,EAAAS,KAAAL,EAAA,OAAAA,EAAA,MAAAJ,EAAAU,GAAA,kCAAAN,EAAA,MAAAJ,EAAAU,GAAA,kGAAAN,EAAA,KAAAJ,EAAAU,GAAA,mGAAAN,EAAA,KAAAJ,EAAAU,GAAA,oEAAAN,EAAA,aAAwZI,YAAA,gBAAAG,IAAgCC,MAAA,SAAAC,GAAyBb,EAAAc,WAAad,EAAAU,GAAA,kBAAAV,EAAAe,OAAAf,EAAAe,MAAA,IAAAf,EAAAO,QAAAH,EAAA,OAA+EI,YAAA,SAAmBJ,EAAA,MAAAJ,EAAAU,GAAA,YAAAN,EAAA,MAAAA,EAAA,KAAAJ,EAAAU,GAAA,uDAAAN,EAAA,qBAAqIE,OAAOU,KAAA,QAAAC,KAAA,QAA4Bb,EAAA,MAAAA,EAAA,MAAAA,EAAA,KAAAJ,EAAAU,GAAA,sCAAAV,EAAAe,QAC75BG,6BCsBeC,GACfC,KAAA,OACA7B,OACA,OACAgB,QAAAc,QACAZ,KAAAY,QACAC,KAAA,OAGA/B,UAIAU,KAAAsB,OAAAC,MAAAF,OACArB,KAAAqB,KAAArB,KAAAsB,OAAAC,MAAAF,KACArB,KAAAwB,YAEAxB,KAAAsB,OAAAC,MAAAE,QACAzB,KAAAM,SAAA,IAGAoB,SACApC,iBACA,IAAA+B,EAAArB,KAAAqB,KACA,MAAAM,QAA6BC,EAAA,KAAcJ,UAAAH,SAC3C,QAAAM,EAAAE,KAAAvB,QAAA,CACAN,KAAAM,SAAA,EACAwB,aAAAC,QAAA,eAAAJ,EAAAE,KAAAG,cACAF,aAAAC,QAAA,gBAAAJ,EAAAE,KAAAI,eAKA,MAAAC,QAA2BN,EAAA,KAAcO,WAAAR,EAAAE,KAAAG,cAGzC,QAAAE,EAAAL,KAAAvB,QAAA,CACA,IAAAV,EAAAsC,EAAAL,KAAAjC,MACAkC,aAAAC,QAAA,QAAAnC,GAGA,MAAAwC,QAA6BC,EAAA,KAAWC,QAAA1C,IAGxC,IAAAwC,EAAAP,KAAAvB,SACAN,KAAAQ,MAAA,EACAR,KAAAuC,QAAAC,SAAArB,KAAA,gBAKAnB,KAAAQ,MAAA,QASAR,KAAAM,SAAA,GAGAhB,OACAU,KAAAuC,QAAAC,SAAArB,KAAA,uBCvFiMsB,EAAA,0BCQjMC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACA3C,EACAmB,GACF,EACA,KACA,WACA,MAIAyB,EAAAG,QAAAC,OAAA,eACezD,EAAA,WAAAqD","file":"js/chunk-02fc3f77.1db30899.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AuthPage.vue?vue&type=style&index=0&id=9920a7de&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AuthPage.vue?vue&type=style&index=0&id=9920a7de&scoped=true&lang=css&\"","import axios from 'axios';\nvar config;\nif (process.env.NODE_ENV !== 'production') {\n\tconfig = require('../../config/settings');\n}\nvar baseURL;\nvar port;\nif (config === undefined) {\n\tbaseURL = \"https://spotilize.herokuapp.com\";\n\tport = \"\";\n} else {\n\tbaseURL = config.baseURL;\n\tport = config.serverPort;\n}\nvar url = baseURL + port + \"/users\";\nexport default () => {\n\treturn axios.create({\n\t\tbaseURL: url,\n\t});\n};","import Api from '@/services/UserApi.js'\n\nexport default {\n\tfetchUsers() {\n\t\treturn Api().get('/');\n\t},\n\tcreateUser(params) {\n\t\treturn Api().post('/add', params);\n\t},\n\tdeleteUser(id) {\n\t\treturn Api().delete(`/delete/${id}`)\n\t},\n\tgetUser(email) {\n\t\treturn Api().get(`/${email}`);\n\t},\n\tloginUser(params) {\n\t\treturn Api().post('/login', params);\n\t},\n\tupdateToken(email, params) {\n\t\treturn Api().put(`/updateToken/${email}`, params);\n\t},\n\tgetUserImage(email) {\n\t\treturn Api().get(`/image/${email}`);\n\t}\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"auth\"}},[(_vm.success===true)?_c('div',{staticClass:\"success\"},[(_vm.user===false)?_c('div',[_c('h1',[_vm._v(\"Thank you for using SmartDJ!\")]),_c('h3',[_vm._v(\"To control your Spotify using gestures and your webcam we need to take a few pictures of you\")]),_c('p',[_vm._v(\"These pictures will be used by our machine learning algorithm to implement facial recognition\")]),_c('p',[_vm._v(\"Click the button below to take finish creating your an account\")]),_c('md-button',{staticClass:\"md-raised chr\",on:{\"click\":function($event){_vm.cont()}}},[_vm._v(\"Continue\")])],1):_vm._e()]):_vm._e(),(_vm.success===false)?_c('div',{staticClass:\"fail\"},[_c('h1',[_vm._v(\"Uh oh!\")]),_c('hr'),_c('p',[_vm._v(\"Something went wrong linking your Spotify Account\")]),_c('font-awesome-icon',{attrs:{\"icon\":\"frown\",\"size\":\"3x\"}}),_c('br'),_c('br'),_c('p',[_vm._v(\"Please go back and try again\")])],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"auth\">\n    <div v-if='success===true' class='success'>\n      <div v-if='user===false'>\n        <h1>Thank you for using SmartDJ!</h1>\n        <h3>To control your Spotify using gestures and your webcam we need to take a few pictures of you</h3>\n        <p>These pictures will be used by our machine learning algorithm to implement facial recognition</p>\n        <p>Click the button below to take finish creating your an account</p>\n        <md-button class=\"md-raised chr\" @click='cont()'>Continue</md-button>\n      </div>\n    </div>\n    <div v-if='success===false' class='fail'>\n        <h1>Uh oh!</h1>\n        <hr>\n        <p>Something went wrong linking your Spotify Account</p><font-awesome-icon icon='frown' size=\"3x\"/> <br><br><p>Please go back and try again</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SpotifyService from '@/services/SpotifyService';\nimport UserService from '@/services/UserService';\n\nexport default {\n  name: 'Auth',\n  data () {\n    return {\n      success: Boolean,\n      user: Boolean,\n      code: null\n    }\n  },\n  mounted() {\n    /*window.onbeforeunload = function () {\n      window.opener.checkToken();\n    }*/\n    if(this.$route.query.code) {\n      this.code = this.$route.query.code;\n      this.exchange();\n    }\n    if(this.$route.query.error) {\n      this.success = false;\n    }\n  },\n  methods: {\n    async exchange() {\n      var code = this.code;\n      const response = await SpotifyService.exchange({code});\n      if(response.data.success === true) {\n        this.success = true;\n        localStorage.setItem('access_token', response.data.access_token);\n        localStorage.setItem('refresh_token', response.data.refresh_token);\n\n        // check if user exists in the database\n        \n        // get this user's email from spotify to check against\n        const eRes = await SpotifyService.getProfile(response.data.access_token);\n\n        // server returned an email\n        if(eRes.data.success === true) {\n          var email = eRes.data.email;\n          localStorage.setItem('email', email);\n\n          // check if that email is in the database\n          const pRes = await UserService.getUser(email);\n\n          // if true, continue to visualizer, start python script on backend\n          if(pRes.data.success === true) {\n            this.user = true;\n            this.$router.replace({name: 'visualizer'});\n          }\n          \n          // Create a new user\n          else {\n            this.user = false;\n          }\n        }\n\n        // couldn't get a response from spotify, probably a bad access code, which is a big bug and shouldn't happen in this if  \n        else {\n\n        }\n      } else {\n        this.success = false;\n      }\n    },\n    cont() {\n      this.$router.replace({name: 'AccountCreation'});\n    }\n  }\n}\n</script>\n\n<style scoped>\n#auth {\n  width:100%;\n  height: 100%;\n  margin: 0 auto;\n  background: #13242f;\n}\n.chr {\n  background-color:#0266C8;\n  margin-top:1em;\n  color:white;\n}\nhr {\n    display: block;\n    height: 1px;\n    border: 0;\n    border-top: 1px solid #ccc;\n    margin: 1em auto;\n    padding: 0;\n    width: 25%;\n}\n.fail {\n  color: white;\n  width: 100%;\n  text-align:center;\n  height: 100%;\n  padding: 10px;\n  position: relative;\n}\n.success {\n  color: white;\n  width: 100%;\n  text-align:center;\n  height: 100%;\n  padding: 10px;\n  position: relative;\n}\n#auth:before {\n  background-size: 100%;\n  background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHJhZGlhbEdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3g9IjUwJSIgY3k9IiIgcj0iOTUlIj48c3RvcCBvZmZzZXQ9IjIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjAiLz48c3RvcCBvZmZzZXQ9Ijk1JSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIvPjwvcmFkaWFsR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');\n  background-image: -moz-radial-gradient(center, ellipse cover, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  background-image: -webkit-radial-gradient(center, ellipse cover, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  background-image: radial-gradient(ellipse cover at center, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  position: absolute;\n  content: \"\";\n  z-index: 0;\n  opacity: 0.9;\n  height: 100%;\n  width: 100%;\n  left: 0;\n  top: 0;\n}\n#auth:after {\n  \tposition: absolute;\n  \tcontent: \"\";\n  \tz-index: 0;\n  \topacity: 0.8;\n  \theight: 100%;\n  \twidth: 100%;\n  \tleft: 0;\n  \ttop: 0;\n}\n</style>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AuthPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AuthPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AuthPage.vue?vue&type=template&id=9920a7de&scoped=true&\"\nimport script from \"./AuthPage.vue?vue&type=script&lang=js&\"\nexport * from \"./AuthPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AuthPage.vue?vue&type=style&index=0&id=9920a7de&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9920a7de\",\n  null\n  \n)\n\ncomponent.options.__file = \"AuthPage.vue\"\nexport default component.exports"],"sourceRoot":""}