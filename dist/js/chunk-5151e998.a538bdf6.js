(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5151e998"],{"35ca":function(t,e,i){"use strict";var a,s,o,r=i("bc3a"),n=i.n(r);void 0===a?(s="https://spotilize.herokuapp.com",o=""):(s=a.baseURL,o=a.serverPort);var h=s+o+"/users",c=()=>{return n.a.create({baseURL:h})};e["a"]={fetchUsers(){return c().get("/")},createUser(t){return c().post("/add",t)},deleteUser(t){return c().delete(`/delete/${t}`)},getUser(t){return c().get(`/${t}`)},loginUser(t){return c().post("/login",t)},updateToken(t,e){return c().put(`/updateToken/${t}`,e)},getUserImage(t){return c().get(`/image/${t}`)}}},"73e3":function(t,e,i){"use strict";var a=i("a715"),s=i.n(a);s.a},a715:function(t,e,i){},c188:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"contentarea"},[i("h3",[t._v("We need you to take some photos of yourself for facial recognition")]),i("p",[t._v("Once you have taken 5 photos, you're done!")]),i("p"),i("p",[t._v("Photos: "+t._s(t.num))]),i("div",{staticClass:"camera"},[i("video",{attrs:{id:"video"}},[t._v("Video stream not available.")]),i("button",{attrs:{id:"startbutton"},on:{click:function(e){t.takePicture()}}},[t._v("Take photo")])]),i("canvas",{attrs:{id:"oCan"}}),t._m(0)])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"output"},[i("img",{attrs:{id:"photo",alt:"The screen capture will appear in this box."}})])}],o=i("35ca"),r=i("2f94"),n={name:"AccountCreation",data(){return{width:Number,height:Number,streaming:Boolean,video:null,stream:null,canvas:null,photo:null,num:0,imgArray:[]}},created(){this.width=600,this.height=0,this.streaming=!1},mounted(){this.video=document.getElementById("video"),this.canvas=document.getElementById("oCan"),this.photo=document.getElementById("photo"),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(t=>{this.stream=t,this.video.srcObject=t,this.video.play()}).catch(t=>{console.log("An error occured: "+t)}),this.video.addEventListener("canplay",t=>{this.streaming||(this.height=this.video.videoHeight/(this.video.videoWidth/this.width),this.video.setAttribute("width",this.width),this.video.setAttribute("height",this.height),this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this.streaming=!0)},!1),this.clearPhoto()},methods:{clearPhoto(){var t=this.canvas.getContext("2d");t.fillStyle="#AAA",t.fillRect(0,0,this.canvas.width,this.canvas.height);var e=this.canvas.toDataURL("image/png");this.photo.setAttribute("src",e)},takePicture(){var t=this.canvas.getContext("2d");if(this.width&&this.height){this.canvas.width=this.width,this.canvas.height=this.height,t.drawImage(this.video,0,0,this.width,this.height);var e=this.canvas.toDataURL("image/png");this.imgArray.push(e),this.photo.setAttribute("src",e),this.num++,5===this.num&&this.createAccount()}else clearphoto()},async createAccount(){const t=await r["a"].getProfile(localStorage.access_token);if(!0===t.data.success){var e=t.data.email,i=t.data.name,a={access_token:localStorage.access_token,refresh_token:localStorage.refresh_token,email:e,name:i,images:this.imgArray};const r=await o["a"].createUser(a);if(!0===r.data.success){this.video.pause();var s=this.stream.getTracks()[0];s.stop(),this.$router.replace({name:"visualizer"})}}}}},h=n,c=(i("73e3"),i("2877")),u=Object(c["a"])(h,a,s,!1,null,"54c271a4",null);u.options.__file="AccountCreation.vue";e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-5151e998.a538bdf6.js.map