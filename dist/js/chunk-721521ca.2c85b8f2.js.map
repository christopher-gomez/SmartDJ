{"version":3,"sources":["webpack:///./src/views/Visualizer.vue?c7b5","webpack:///./src/services/UserApi.js","webpack:///./src/services/UserService.js","webpack:///./src/util/Particle.js","webpack:///./src/views/Visualizer.vue?e781","webpack:///src/views/Visualizer.vue","webpack:///./src/views/Visualizer.vue?cb98","webpack:///./src/views/Visualizer.vue?7346"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Visualizer_vue_vue_type_style_index_0_id_59c2572c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Visualizer_vue_vue_type_style_index_0_id_59c2572c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","config","baseURL","port","undefined","serverPort","url","UserApi","axios_default","a","create","__webpack_exports__","[object Object]","get","params","post","id","delete","email","put","NUM_BANDS","SCALE","MIN","MAX","SPEED","ALPHA","SPIN","SIZE","COLORS","random","min","max","isArray","Math","length","isNumber","object","Object","prototype","toString","call","Particle","x1","y1","this","x","y","reset","level","floor","scale","alpha","speed","color","size","spin","band","smoothedScale","smoothedAlpha","decayScale","decayAlpha","rotation","PI","energy","ctx","power","exp","save","beginPath","translate","cos","rotate","moveTo","lineTo","lineWidth","lineCap","globalAlpha","strokeStyle","stroke","restore","render","_vm","_h","$createElement","_c","_self","ref","attrs","staticStyle","text-align","ok-only","title","_v","display","staticRenderFns","chromeId","NODE_ENV","BASE_URL","Visualizervue_type_script_lang_js_","token","trackId","trackName","trackDuration","transferred","isPaused","NUM_PARTICLES","particles","height","width","ratio","bands","prevEnergy","requestid","visCanvas","HTMLElement","MODEL_URLS","dWidth","Number","dHeight","streaming","Boolean","video","dStream","dCanvas","photoToSend","refImage","HTMLImageElement","faceMatcher","sockets","playerReady","data","access_token","playerId","player_id","transfer","stateChanged","state","paused","track_window","current_track","name","tokenRefreshed","played","chrome","runtime","sendMessage","response","listening","$refs","myModalRef","show","$router","replace","window","addEventListener","event","source","type","sizeCanvas","cancelAnimationFrame","document","getElementById","createElement","loadFaceAPI","navigator","mediaDevices","getUserMedia","audio","then","stream","srcObject","catch","err","console","log","ev","videoHeight","videoWidth","setAttribute","play","onPlay","clearPhoto","methods","getContext","fillStyle","fillRect","toDataURL","localStorage","imgRes","UserService","getUserImage","success","Image","src","image","faceapi","loadTinyFaceDetectorModel","loadFaceLandmarkModel","loadFaceRecognitionModel","results","detectAllFaces","TinyFaceDetectorOptions","withFaceLandmarks","withFaceDescriptors","FaceMatcher","videoEl","singleResult","detectSingleFace","withFaceDescriptor","bestMatch","findBestMatch","descriptor","person","includes","takePicture","setTimeout","drawImage","$socket","emit","devicePixelRatio","innerHeight","innerWidth","globalCompositeOperation","SpotifyService","transferDevicePlayer","device_id","setup","getTrackInfo","analyzeTrack","i","particle","push","requestAnimationFrame","draw","clearRect","update","j","move","views_Visualizervue_type_script_lang_js_","component","componentNormalizer","options","__file"],"mappings":"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","file":"js/chunk-721521ca.2c85b8f2.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Visualizer.vue?vue&type=style&index=0&id=59c2572c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Visualizer.vue?vue&type=style&index=0&id=59c2572c&scoped=true&lang=css&\"","import axios from 'axios';\nvar config;\nif (process.env.NODE_ENV !== 'production') {\n\tconfig = require('../../config/settings');\n}\nvar baseURL;\nvar port;\nif (config === undefined) {\n\tbaseURL = \"https://spotilize.herokuapp.com\";\n\tport = \"\";\n} else {\n\tbaseURL = config.baseURL;\n\tport = config.serverPort;\n}\nvar url = baseURL + port + \"/users\";\nexport default () => {\n\treturn axios.create({\n\t\tbaseURL: url,\n\t});\n};","import Api from '@/services/UserApi.js'\n\nexport default {\n\tfetchUsers() {\n\t\treturn Api().get('/');\n\t},\n\tcreateUser(params) {\n\t\treturn Api().post('/add', params);\n\t},\n\tdeleteUser(id) {\n\t\treturn Api().delete(`/delete/${id}`)\n\t},\n\tgetUser(email) {\n\t\treturn Api().get(`/${email}`);\n\t},\n\tloginUser(params) {\n\t\treturn Api().post('/login', params);\n\t},\n\tupdateToken(email, params) {\n\t\treturn Api().put(`/updateToken/${email}`, params);\n\t},\n\tgetUserImage(email) {\n\t\treturn Api().get(`/image/${email}`);\n\t}\n}","const NUM_BANDS = 256;\nconst SCALE = {\n\tMIN: 15.0,\n\tMAX: 80.0\n};\nconst SPEED = {\n\tMIN: 0.2,\n\tMAX: 1.0\n};\nconst ALPHA = {\n\tMIN: 0.8,\n\tMAX: 0.9\n};\nconst SPIN = {\n\tMIN: 0.001,\n\tMAX: 0.005\n};\nconst SIZE = {\n\tMIN: 1.0,\n\tMAX: 1.25\n};\nconst COLORS = ['#69D2E7', '#1B676B', '#BEF202', '#EBE54D', '#00CDAC', '#1693A5', '#F9D423', '#FF4E50', '#E7204E', '#0CCABA', '#FF006F'];\n\nfunction random (min, max = undefined) {\n\n\tif (isArray(min))\n\n\t\treturn min[~~(Math.random() * min.length)];\n\n\tif (!isNumber(max))\n\n\t\tmax = min || 1, min = 0;\n\n\treturn min + Math.random() * (max - min);\n}\n\nfunction isArray(object) {\n\n\treturn Object.prototype.toString.call(object) == '[object Array]';\n}\n\nfunction isNumber(object) {\n\n\treturn typeof object == 'number';\n}\n\n\nvar Particle = class Particle {\n\n\tconstructor(x1 = 0, y1 = 0) {\n\t\tthis.x = x1;\n\t\tthis.y = y1;\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tthis.level = 1 + Math.floor(random(4));\n\t\tthis.scale = random(SCALE.MIN, SCALE.MAX);\n\t\tthis.alpha = random(ALPHA.MIN, ALPHA.MAX);\n\t\tthis.speed = random(SPEED.MIN, SPEED.MAX);\n\t\tthis.color = random(COLORS);\n\t\tthis.size = random(SIZE.MIN, SIZE.MAX);\n\t\tthis.spin = random(SPIN.MAX, SPIN.MAX);\n\t\tthis.band = Math.floor(random(NUM_BANDS));\n\t\tif (random() < 0.5) {\n\t\t\tthis.spin = -this.spin;\n\t\t}\n\t\tthis.smoothedScale = 0.0;\n\t\tthis.smoothedAlpha = 0.0;\n\t\tthis.decayScale = 0.0;\n\t\tthis.decayAlpha = 0.0;\n\t\tthis.rotation = random(Math.PI * 2);\n\t\treturn this.energy = 0.0;\n\t}\n\n\tmove() {\n\t\tthis.rotation += this.spin;\n\t\treturn this.y -= (this.speed/1.5) * this.level;\n\t}\n\n\tdraw(ctx) {\n\t\tvar alpha, power, scale;\n\t\tpower = Math.exp(this.energy);\n\t\tscale = this.scale * power;\n\t\talpha = this.alpha * this.energy * 1.5;\n\t\tthis.decayScale = Math.max(this.decayScale, scale);\n\t\tthis.decayAlpha = Math.max(this.decayAlpha, alpha);\n\t\tthis.smoothedScale += (this.decayScale - this.smoothedScale) * 0.3;\n\t\tthis.smoothedAlpha += (this.decayAlpha - this.smoothedAlpha) * 0.3;\n\t\tthis.decayScale *= 0.985;\n\t\tthis.decayAlpha *= 0.975;\n\t\tctx.save();\n\t\tctx.beginPath();\n\t\tctx.translate(this.x + Math.cos(this.rotation * this.speed) * 250, this.y);\n\t\tctx.rotate(this.rotation);\n\t\tctx.scale(this.smoothedScale * (this.level/2.5), this.smoothedScale * (this.level/2.5));\n\t\tctx.moveTo(this.size * 0.5, 0);\n\t\tctx.lineTo(this.size * -0.5, 0);\n\t\tctx.lineWidth = 1;\n\t\tctx.lineCap = 'round';\n\t\tctx.globalAlpha = this.smoothedAlpha / this.level;\n\t\tctx.strokeStyle = this.color;\n\t\tctx.stroke();\n\t\treturn ctx.restore();\n\t}\n}\n\nexport default Particle;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"vis\",attrs:{\"id\":\"visualizer\"}},[_c('canvas',{attrs:{\"id\":\"canvas1\"}}),_c('b-modal',{ref:\"myModalRef\",staticStyle:{\"color\":\"black\",\"text-align\":\"center\"},attrs:{\"ok-only\":\"\",\"title\":\"Whoops...\"}},[_c('p',[_vm._v(\"Click the Spotilize extension button in the Chrome toolbar to start the visualizer!\")])]),_c('b-modal',[_c('canvas',{attrs:{\"id\":\"oCan\"}})]),_c('image',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"imgSent\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div id='visualizer' ref='vis'>\n\t\t<canvas id='canvas1'></canvas>\n\t\t<b-modal ref=\"myModalRef\" ok-only style='color:black;text-align:center' title='Whoops...'>\n\t\t\t<p>Click the Spotilize extension button in the Chrome toolbar to start the visualizer!</p>\n\t\t</b-modal>\n\t\t<b-modal>\n\t\t\t<canvas id=\"oCan\"></canvas>\n\t\t</b-modal>\n\t\t<image id=\"imgSent\" style='display:none'></image>\n\t</div>\n</template>\n\n<script>\nimport SpotifyService from '@/services/SpotifyService';\nimport UserService from '@/services/UserService';\nimport PythonService from '@/services/PythonService';\nimport Particle from '@/util/Particle.js';\nimport Controls from '@/components/Controls';\n\nif (process.env.NODE_ENV !== 'production') {\n  var config = require('../../config/settings');\n}\n\nvar chromeId = process.env.chromeId || config.chromeId;\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\ttoken: '',\n\t\t\ttrackId: '',\n\t\t\ttrackName: '',\n\t\t\ttrackDuration: 0,\n\t\t\ttransferred: false,\n\t\t\tisPaused: false,\n\t\t\tNUM_PARTICLES: 200,\n\t\t\tparticles: [],\n\t\t\theight: null,\n\t\t\twidth: null,\n\t\t\tratio: null,\n\t\t\tctx: null,\n\t\t\tbands: null,\n\t\t\tprevEnergy: [],\n\t\t\trequestid: null,\n\t\t\tvisCanvas: HTMLElement,\n\t\t\tMODEL_URLS: '/models',\n\t\t\tdWidth: Number,\n\t\t\tdHeight: Number,\n\t\t\tstreaming: Boolean,\n\t\t\tvideo: null,\n\t\t\tdStream: null,\n\t\t\tdCanvas: null,\n\t\t\tphotoToSend: null,\n\t\t\trefImage: HTMLImageElement,\n\t\t\tfaceMatcher: null\n\t\t}\n\t},\n\tsockets: {\n\t\tplayerReady: function(data) {\n\t\t\tthis.token = data.token.access_token;\n\t\t\tthis.playerId = data.player_id;\n\t\t\tif(this.transferred === false) {\n\t\t\t\tthis.transfer();\n\t\t\t}\n\t\t},\n\t\tstateChanged: function(data) {\n\t\t\tif(data.state.paused !== true && this.trackId !== data.state.track_window.current_track.id) {\n\t\t\t\tthis.trackId = data.state.track_window.current_track.id;\n\t\t\t\tthis.trackName = data.state.track_window.current_track.name;\n\t\t\t\tif(this.transferred === false) {\n\t\t\t\t\tthis.transfer();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(data.state.paused === true) {\n\t\t\t\tthis.isPaused = true;\n\t\t\t} else {\n\t\t\t\tthis.isPaused = false;\n\t\t\t}\n\t\t},\n\t\ttokenRefreshed: function(data) {\n\t\t\tthis.token = data.token;\n\t\t},\n\t\tpaused: function() {\n\n\t\t},\n\t\tplayed: function() {\n\t\t\t\n\t\t}\n\t},\n\tcreated() {\n\t\tchrome.runtime.sendMessage(chromeId, 'listening', (response) => {\n        if(!response) {\n          this.$router.replace({name: 'home'});\n        } else if(response.listening === false) {\n\t\t\t  this.$refs.myModalRef.show();\n        }\n      });\n\t\tthis.bands = null;\n\t\tthis.dWidth = 600;\n\t\tthis.dHeight = 0;\n\t\tthis.streaming = false;\n\n\t\twindow.addEventListener(\"message\", (event) => {\n\t\t\t// We only accept messages from ourselves\n\t\t\tif (event.source != window)\n\t\t\t\treturn;\n\t\t\tif(event.data.type = \"frequency_data\")\n\t\t\t\tthis.bands = event.data.data;\n\t\t\tif(event.data.type = \"fullScreenDone\")\n\t\t\t\tthis.sizeCanvas();\n\t\t});\n\t},\n\tbeforeDestroy() {\n\t\tthis.NUM_PARTICLES = 150;\n\t\tthis.particles = [];\n\t\tthis.bands = null;\n\t\tthis.ctx = null;\n\t\tthis.visCanvas = null;\n\t\twindow.cancelAnimationFrame(this.requestid);\n\t},\n\tmounted() {\n\t\tthis.visCanvas = document.getElementById('canvas1');\n\t\tthis.video = document.createElement('video');\n\t\tthis.dCanvas = document.getElementById('oCan');\n\t\tthis.loadFaceAPI();\n\t\tnavigator.mediaDevices.getUserMedia({video: true, audio: false}).then((stream) => {\n\t\t\tthis.dStream = stream;\n\t\t\tthis.video.srcObject = stream;\n\t\t\t\n\t\t}).catch((err) => {\n\t\t\tconsole.log(\"An error occured: \"+err);\n\t\t});\n\t\tthis.video.addEventListener('canplay', (ev) => {\n\t\t\tif(!this.streaming) {\n\t\t\t\tthis.dHeight = this.video.videoHeight / (this.video.videoWidth / this.dWidth);\n\t\t\t\tthis.video.setAttribute('width', this.dWidth);\n\t\t\t\tthis.video.setAttribute('height', this.dHeight);\n\t\t\t\tthis.dCanvas.setAttribute('width', this.dWidth);\n\t\t\t\tthis.dCanvas.setAttribute('height', this.dHeight);\n\t\t\t\tthis.streaming = true;\n\t\t\t\tthis.video.play();\n\t\t\t\tthis.onPlay(this.video);\n\t\t\t}\n\t\t}, false);\n\t\tthis.clearPhoto();\n\t\t\n\t\t\n\t\tthis.sizeCanvas();\n\t},\n\tmethods: {\n\t\tclearPhoto() {\n\t\t\tvar ctx = this.dCanvas.getContext('2d');\n\t\t\tctx.fillStyle = \"#AAA\";\n\t\t\tctx.fillRect(0,0, this.dCanvas.width, this.dCanvas.height);\n\t\t\tvar data = this.dCanvas.toDataURL('image/png');\n\t\t\t\n\t\t},\n\t\tasync loadFaceAPI() {\n\t\t\tconsole.log('Email: '+localStorage.email);\n\t\t\tconst imgRes = await UserService.getUserImage(localStorage.email);\n\t\t\tif(imgRes.data.success === true) {\n\t\t\t\tthis.refImage = new Image();\n\t\t\t\tthis.refImage.src = imgRes.data.image\n\t\t\t}\n\t\t\tawait faceapi.loadTinyFaceDetectorModel(this.MODEL_URLS)\n\t\t\tawait faceapi.loadFaceLandmarkModel(this.MODEL_URLS);\n\t\t\tawait faceapi.loadFaceRecognitionModel(this.MODEL_URLS);\n\t\t\tconsole.log(\"Detecting faces in ref image\");\n\t\t\tconst results = await faceapi.detectAllFaces(this.refImage, new faceapi.TinyFaceDetectorOptions())\n  \t\t\t\t\t\t\t\t\t\t\t\t  .withFaceLandmarks()\n  \t\t\t\t\t\t\t\t\t\t\t\t  .withFaceDescriptors()\n\t\t\tif (!results.length) {\n  \t\t\t\treturn\n\t\t\t}\n\n\t\t\t// create FaceMatcher with automatically assigned labels\n\t\t\t// from the detection results for the reference image\n\t\t\tthis.faceMatcher = new faceapi.FaceMatcher(results)\n\t\t\tconsole.log('face api loaded');\n\t\t},\n\t\tasync onPlay(videoEl) {\n\t\t\tconst singleResult = await faceapi\n  \t\t\t\t\t\t\t\t\t\t.detectSingleFace(videoEl, new faceapi.TinyFaceDetectorOptions())\n  \t\t\t\t\t\t\t\t\t\t.withFaceLandmarks()\n  \t\t\t\t\t\t\t\t\t\t.withFaceDescriptor()\n\t\t\tif (singleResult) {\n  \t\t\t\tconst bestMatch = this.faceMatcher.findBestMatch(singleResult.descriptor)\n\t\t\t\t  console.log(\"Recognize: \"+bestMatch.toString())\n\t\t\t\t  var person = bestMatch.toString();\n\t\t\t\t  console.log(\"person includes unknown: \"+person.includes(\"Unknown\"));\n\t\t\t\t  if(person.includes(\"Unknown\") === false) {\n\t\t\t\t\t  this.takePicture();\n\t\t\t\t  }\n\t\t\t}\t\t\n\n\t\t\tsetTimeout(() => this.onPlay(videoEl), 1500);\n\t\t},\n\t\ttakePicture() {\n\t\t\tconsole.log(\"taking picture\");\n\t\t\tconsole.log(this.dWidth +\" \"+this.dHeight);\n\t\t\tvar ctx = this.dCanvas.getContext('2d');\n\t\t\tif (this.dWidth && this.dHeight) {\n     \t \t\tthis.dCanvas.width = this.dWidth;\n      \t\tthis.dCanvas.height = this.dHeight;\n     \t\t \tctx.drawImage(this.video, 0, 0, this.dWidth, this.dHeight);\n\t\t\t\tvar data = this.dCanvas.toDataURL('image/png');\n\t\t\t\t//var base64 = data.replace(\"data:image/png;base64,\",\"\");\n\t\t\t\tconsole.log(\"sending picture\");\n\t\t\t\tthis.$socket.emit('image', {image: data});\n    \t\t} else {\n     \t\t \tthis.clearPhoto();\n\t\t\t }\n\t\t},\n\t\tsizeCanvas() {\n\t\t\tthis.ratio = window.devicePixelRatio;\n\t\t\tthis.height = window.innerHeight;\n\t\t\tthis.width = window.innerWidth;\n\t\t\t//scale the canvas\n\t\t\tif(this.visCanvas !== null && this.visCanvas !== undefined) {\n\t\t\t\tthis.visCanvas.setAttribute('height', this.height * this.ratio);\n\t\t\t\tthis.visCanvas.setAttribute('width', this.width * this.ratio);\n\t\t\t\tthis.ctx = this.visCanvas.getContext('2d');\n\t\t\t\tthis.ctx.globalCompositeOperation = 'lighter';\n\t\t\t}\n\t\t},\n\t\tasync transfer() {\n\t\t\tconst response = await SpotifyService.transferDevicePlayer({id: localStorage.device_id, access_token: localStorage.access_token, play: true});\n\t\t\tif(response.data.success === true) {\n\t\t\t\tthis.setup();\n\t\t\t\tthis.transferred = true;\n\t\t\t}\n\t\t},\n\t\tasync getTrackInfo() {\n\t\t\tconst response = await SpotifyService.getTrackInfo(localStorage.access_token, this.trackId);\n\t\t\tif(response.data.success === true) {\n\n\t\t\t}\n\t\t},\n\t\tasync analyze() {\n\t\t\tconst response = await SpotifyService.analyzeTrack(localStorage.access_token, this.trackId);\n\t\t\tif(response.data.success === true) {\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tsetup() {\n\t\t\tvar i, j, particle, x, y;\n\t\t\tfor (i = 0; i <= this.NUM_PARTICLES - 1; i++) {\n        \t\tx = this.random(this.width);\n        \t\ty = this.random(this.height);\n        \t\tparticle = new Particle(x, y);\n        \t\tparticle.energy = this.random(particle.band / 256);\n        \t\tthis.particles.push(particle);\n\t\t\t}\n\t\t\tthis.requestid = requestAnimationFrame(this.draw);\n\t\t},\n\t\tdraw() {\n\t\t\tthis.ctx.clearRect(0, 0, this.width * this.ratio, this.height * this.ratio);\n\t\t\tthis.update();\n\t\t\tthis.requestid = requestAnimationFrame(this.draw);\n\t\t},\n\t\tupdate() {\n\t\t\tlet particle;\n      \tfor (let j = 0; j < this.particles.length; j++) {\n\t\t\t\t  particle = this.particles[j];\n\t\t\t\t  if(this.bands !== undefined && this.bands !== null) {\n\t\t\t\t\t  particle.energy = this.bands[particle.band] / 256;\n\t\t\t\t  }\n        \t\t// recycle particles\n        \t\tif (particle.y < -particle.size * particle.level * particle.scale) {\n         \t\tparticle.reset();\n          \t\tparticle.x = this.random(this.width);\n\t\t\t\t\tparticle.y = this.height + (particle.size * particle.scale * particle.level);\n        \t\t}\n        \t\tparticle.move();\n        \t\tparticle.draw(this.ctx);\n\t\t\t}\n\t\t},\n\t\trandom (min, max = undefined) {\n\t\t\tif (this.isArray(min))\n\t\t\t\treturn min[~~(Math.random() * min.length)];\n\t\t\tif (!this.isNumber(max))\n\t\t\t\tmax = min || 1, min = 0;\n\t\t\treturn min + Math.random() * (max - min);\n\t\t},\n\t\tisArray(object) {\n\t\t\treturn Object.prototype.toString.call(object) == '[object Array]';\n\t\t},\n\t\tisNumber(object) {\n\t\t\treturn typeof object == 'number';\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n#visualizer {\n\theight: 100%;\n\tcolor: white;\n\tbackground: #13242f;\n}\n#canvas {\n\tz-index: -1;\n}\n#visualizer:before {\n  background-size: 100%;\n  background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHJhZGlhbEdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3g9IjUwJSIgY3k9IiIgcj0iOTUlIj48c3RvcCBvZmZzZXQ9IjIwJSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIgc3RvcC1vcGFjaXR5PSIwLjAiLz48c3RvcCBvZmZzZXQ9Ijk1JSIgc3RvcC1jb2xvcj0iIzAwMDAwMCIvPjwvcmFkaWFsR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');\n  background-image: -moz-radial-gradient(center, ellipse cover, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  background-image: -webkit-radial-gradient(center, ellipse cover, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  background-image: radial-gradient(ellipse cover at center, rgba(0, 0, 0, 0) 20%, #000000 95%);\n  position: absolute;\n  content: \"\";\n  z-index: 0;\n  opacity: 0.9;\n  height: 100%;\n  width: 100%;\n  left: 0;\n  top: 0;\n}\n#visualizer:after {\n\tbackground: url(\"https://s.cdpn.io/1715/noise-1.png\");\n  \tposition: absolute;\n  \tcontent: \"\";\n  \tz-index: 0;\n  \topacity: 0.8;\n  \theight: 100%;\n  \twidth: 100%;\n  \tleft: 0;\n  \ttop: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Visualizer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Visualizer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Visualizer.vue?vue&type=template&id=59c2572c&scoped=true&\"\nimport script from \"./Visualizer.vue?vue&type=script&lang=js&\"\nexport * from \"./Visualizer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Visualizer.vue?vue&type=style&index=0&id=59c2572c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59c2572c\",\n  null\n  \n)\n\ncomponent.options.__file = \"Visualizer.vue\"\nexport default component.exports"],"sourceRoot":""}